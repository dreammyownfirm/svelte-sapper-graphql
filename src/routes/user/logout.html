<script>
	import * as sapper from '../../../__sapper__/client'

	export default {
		preload(params) {
      if ( this.store.get().isAuth === false) {
        return this.redirect(301, '/')
      }
		},

    oncreate() {
			this.store.logout()
				.then(res => {
					if (res.error) {
						throw res.error
					} else {
						this.store.banner({
							html: "Signed off",
							level: 'warning',
							duration: 3
						})
					}
				})
				.catch(err => {
					console.error('logout/oncreate catch', err)
				})
			return sapper.goto('/')	
		}

	}
</script>